<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="./style/forest.css" rel="stylesheet" />
  </head>
  <body>
    <script src="./lib/tmi.min.js"></script>
    <script src="./configs.js"></script>
    <script src="./js/forest.js"></script>
    <script type="text/javascript" src="./js/jquery.min.js"></script>
    <script type="text/javascript" src="./js/qrcode.js"></script>
    <script src="https://unpkg.com/@bitjson/qr-code@1.0.2/dist/qr-code.js"></script>

    <div class="forest-container">
      <div id="forest-code"></div>
      <div id="qrcode" style="width:500px; height:500px; margin-top:200px;"></div>
	    <qr-code
  id="qr1"
  contents="https://bitjson.com/"
  module-color="#1c7d43"
  position-ring-color="#13532d"
  position-center-color="#70c559"
  mask-x-to-y-ratio="1.2"
  style="
    width: 200px;
    height: 200px;
    margin: 2em auto;
    background-color: #fff;
  "
>
  <img src="assets/1.2-x-to-y-ratio-icon.svg" slot="icon" />
</qr-code>

<script>
  document.getElementById('qr1').addEventListener('codeRendered', () => {
    document.getElementById('qr1').animateQRCode('MaterializeIn');
  });
</script>
    </div>
	
<script type="text/javascript">
	var qrcode = new QRCode(document.getElementById("qrcode"), {
	width : 500,
	height : 500
});

function makeCode () {		
	alert("comienza")
	var elText = document.getElementById("forest-code");
	if (elText != null) {
		var codigo = 'https://www.forestapp.cc/join-room/?token='+elText.value;
		alert (codigo);
		qrcode.makeCode(codigo);
	}else{
		alert("debe ser nulo")
	}
}

makeCode();

</script>
  </body>
</html>
